(window.webpackJsonp=window.webpackJsonp||[]).push([[7],{353:function(t,s,n){"use strict";n.r(s);var a=n(42),e=Object(a.a)({},(function(){var t=this,s=t.$createElement,n=t._self._c||s;return n("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[n("h1",{attrs:{id:"centos-jenkins教程"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#centos-jenkins教程"}},[t._v("#")]),t._v(" centos-jenkins教程")]),t._v(" "),n("h2",{attrs:{id:"安装"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#安装"}},[t._v("#")]),t._v(" 安装")]),t._v(" "),n("div",{staticClass:"language-bash extra-class"},[n("pre",{pre:!0,attrs:{class:"language-bash"}},[n("code",[n("span",{pre:!0,attrs:{class:"token function"}},[t._v("sudo")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("wget")]),t._v(" -O /etc/yum.repos.d/jenkins.repo http://pkg.jenkins-ci.org/redhat-stable/jenkins.repo\n"),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("sudo")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("rpm")]),t._v(" --import https://jenkins-ci.org/redhat/jenkins-ci.org.key\n"),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("sudo")]),t._v(" yum "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("install")]),t._v(" jenkins --nogpgcheck\nyum "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("install")]),t._v(" docker.x86_64 //安装docker\nyum -y "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("install")]),t._v(" java-1.8.0-openjdk* // 安装java环境\nyum -y "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("install")]),t._v(" node //安装node环境\nyum -y "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("install")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("git")]),t._v(" //安装git\n")])])]),n("h2",{attrs:{id:"使用"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#使用"}},[t._v("#")]),t._v(" 使用")]),t._v(" "),n("ol",[n("li",[n("p",[t._v("阿里云服务器需要在实例-更多-网络与安全组-安全组配置-配置规则-手动添加8080（默认）端口开放")])]),t._v(" "),n("li",[n("div",{staticClass:"language-bash extra-class"},[n("pre",{pre:!0,attrs:{class:"language-bash"}},[n("code",[t._v("systemctl "),n("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v("enable")]),t._v(" jenkins "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 开机启动")]),t._v("\nsystemctl start jenkins "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 启动jenkins")]),t._v("\n")])])])]),t._v(" "),n("li",[n("p",[t._v("浏览器访问 ip:8080")]),t._v(" "),n("p",[n("img",{attrs:{src:"https://i.loli.net/2020/07/21/LBDM2pgmGC5lIEZ.png",alt:"jenkins"}})])]),t._v(" "),n("li",[n("p",[t._v("修改默认jenkins插件源与连接检测位置(先确定default.json的路径)")]),t._v(" "),n("div",{staticClass:"language-bash extra-class"},[n("pre",{pre:!0,attrs:{class:"language-bash"}},[n("code",[t._v("$ "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("sed")]),t._v(" -i "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'s/http:\\/\\/updates.jenkins-ci.org\\/download/https:\\/\\/mirrors.tuna.tsinghua.edu.cn\\/jenkins/g'")]),t._v(" /var/lib/jenkins/updates/default.json\n$ "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("sed")]),t._v(" -i "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'s/http:\\/\\/www.google.com/https:\\/\\/www.baidu.com/g'")]),t._v(" /var/lib/jenkins/updates/default.json\n")])])])]),t._v(" "),n("li",[n("p",[t._v("解锁jenkins，输入密码，安装推荐插件")]),t._v(" "),n("p",[n("img",{attrs:{src:"https://i.loli.net/2020/07/21/CEji6xl1G2t3PoX.png",alt:"jenkins plugins"}})])]),t._v(" "),n("li",[n("p",[t._v("创建管理员账号")])])]),t._v(" "),n("h2",{attrs:{id:"jenkins配置"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#jenkins配置"}},[t._v("#")]),t._v(" jenkins配置")]),t._v(" "),n("ol",[n("li",[n("p",[t._v("jenkins-系统管理-插件管理 安装NodeJS Plugin")]),t._v(" "),n("p",[n("img",{attrs:{src:"https://i.loli.net/2020/07/21/hGk8Ijx4smtgn7K.png",alt:"NODEJS PLUGIN"}})])]),t._v(" "),n("li",[n("p",[t._v("jenkins-系统管理-全局工具配置")]),t._v(" "),n("p",[n("img",{attrs:{src:"http://ww1.sinaimg.cn/large/826d6e88gy1ghg1rq46zmj21ig0ramyy.jpg",alt:"global git"}})]),t._v(" "),n("p",[n("img",{attrs:{src:"http://ww1.sinaimg.cn/large/826d6e88gy1ggzhmmvz9hj21ig0ra0ue.jpg",alt:"global node"}})])]),t._v(" "),n("li",[n("p",[t._v("github-setting-developer setting-personal access tokens-Generate new token")]),t._v(" "),n("p",[n("img",{attrs:{src:"https://i.loli.net/2020/07/22/I1DyjPHpMqh8Kvg.png",alt:"generate token"}}),t._v("\n生成token后保存起来")])]),t._v(" "),n("li",[n("p",[t._v("Jenkins-系统管理-系统配置-github-添加github服务器")]),t._v(" "),n("ul",[n("li",[n("p",[t._v("名称是github账户名称")])]),t._v(" "),n("li",[n("p",[t._v("添加凭据，类型选择secret text，secret是刚刚生成的token，id是凭据的别名")]),t._v(" "),n("p",[n("img",{attrs:{src:"https://i.loli.net/2020/07/22/IwBS4xMDpNhlJiu.png",alt:""}})])]),t._v(" "),n("li",[n("p",[t._v("选择刚刚的凭据，连接测试，勾上管理hook，测试成功后保存")]),t._v(" "),n("p",[n("img",{attrs:{src:"https://i.loli.net/2020/07/22/sZu3lMX7B8NQ9Pv.png",alt:"connect test"}})])])])]),t._v(" "),n("li",[n("p",[t._v("jenkins-新建任务")]),t._v(" "),n("ul",[n("li",[t._v("配置")])]),t._v(" "),n("p",[n("img",{attrs:{src:"https://i.loli.net/2020/07/22/L8k9BdlPDbjHWEf.png",alt:"new task1"}})]),t._v(" "),n("p",[n("img",{attrs:{src:"http://ww1.sinaimg.cn/large/826d6e88gy1ggzj9g965oj21ig0ra75u.jpg",alt:"new task2"}})]),t._v(" "),n("p",[n("img",{attrs:{src:"https://i.loli.net/2020/07/22/Sto914RzZn3yAeW.png",alt:"git url"}})]),t._v(" "),n("ul",[n("li",[t._v("添加github账户为credentials")])]),t._v(" "),n("p",[n("img",{attrs:{src:"https://i.loli.net/2020/07/22/IbUzQow3riABXv7.png",alt:"add github account"}})]),t._v(" "),n("p",[n("img",{attrs:{src:"https://i.loli.net/2020/07/22/6cvWkwuf2r1RIjD.png",alt:"environment"}})]),t._v(" "),n("p",[n("img",{attrs:{src:"https://i.loli.net/2020/07/22/zJTSFqe7EY5VOIU.png",alt:"shell"}})]),t._v(" "),n("ul",[n("li",[t._v("github 项目添加 webhook")])]),t._v(" "),n("p",[n("img",{attrs:{src:"http://ww1.sinaimg.cn/large/826d6e88gy1ghg0bpax5oj21ig0rawgg.jpg",alt:"webhook"}})])]),t._v(" "),n("li",[n("p",[t._v("更新远程仓库会后自动构建")]),t._v(" "),n("p",[n("img",{attrs:{src:"http://ww1.sinaimg.cn/large/826d6e88gy1ggzkcjq59fj21ig0raju3.jpg",alt:"output1"}})]),t._v(" "),n("p",[n("img",{attrs:{src:"http://ww1.sinaimg.cn/large/826d6e88gy1ggzkdkj9eaj21ig0rajt9.jpg",alt:"output2"}})])])])])}),[],!1,null,null,null);s.default=e.exports}}]);